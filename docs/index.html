<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Barton Phillips: bartonphillips@gmail.com" />
  <title>Index</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

pre.sourceCode {
  background-color: #EEF3E2;
  border-left: 10px solid gray;
  padding: 5px;
}
code {
  background-color: #EEF3E2;
}
  </style>
</head>
<body>
<h1 id="rssfeed-class">RssFeed Class</h1>
<p><a href="https://github.com/bartonlp/rssfeed">GitHub: https://github.com/bartonlp/rssfeed</a></p>
<p>This is a PHP class that can read RSS feeds. A RSS file has an XML format with <em>item</em> as the main element. The XML file looks something like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; <span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">&lt;rss</span><span class="ot"> version=</span><span class="st">&quot;2.0&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">&lt;channel&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="kw">&lt;title&gt;</span>Main Title<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="kw">&lt;link&gt;</span>http://www.example.com<span class="kw">&lt;/link&gt;</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="kw">&lt;description&gt;</span>Example description for channel<span class="kw">&lt;/description&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="kw">&lt;lastBuildDate&gt;</span>Sat, 03 Dec 2016 19:31:18 +0000<span class="kw">&lt;/lastBuildDate&gt;</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="kw">&lt;generator&gt;</span>Program Name if any<span class="kw">&lt;/generator&gt;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="kw">&lt;item&gt;</span></a>
<a class="sourceLine" id="cb1-10" title="10">      <span class="kw">&lt;title&gt;</span>Example of RSS Feed<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb1-11" title="11">      <span class="kw">&lt;link&gt;</span>http://www.example.com/link/<span class="kw">&lt;/link&gt;</span></a>
<a class="sourceLine" id="cb1-12" title="12">      <span class="kw">&lt;description&gt;</span></a>
<a class="sourceLine" id="cb1-13" title="13">        Description of this item. All entities should be escaped. Example <span class="dv">&amp;lt;</span>test<span class="dv">&amp;gt;</span> </a>
<a class="sourceLine" id="cb1-14" title="14">      <span class="kw">&lt;/description&gt;</span></a>
<a class="sourceLine" id="cb1-15" title="15">      <span class="kw">&lt;pubDate&gt;</span>Sat, 16 May 2009 17:12:15 +0000<span class="kw">&lt;/pubDate&gt;</span></a>
<a class="sourceLine" id="cb1-16" title="16">    <span class="kw">&lt;/item&gt;</span></a>
<a class="sourceLine" id="cb1-17" title="17">    <span class="kw">&lt;item&gt;</span></a>
<a class="sourceLine" id="cb1-18" title="18">      <span class="kw">&lt;title&gt;</span>Another Example<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb1-19" title="19">      <span class="kw">&lt;link&gt;</span>http://www.example.com/link2/&gt;</a>
<a class="sourceLine" id="cb1-20" title="20">      <span class="kw">&lt;description&gt;</span>Some more stuff<span class="kw">&lt;/description&gt;</span></a>
<a class="sourceLine" id="cb1-21" title="21">      <span class="kw">&lt;pubDate&gt;</span>Sat, 16 May 2016 17:12:15 +0000<span class="kw">&lt;/pubDate&gt;</span></a>
<a class="sourceLine" id="cb1-22" title="22">    <span class="kw">&lt;/item&gt;</span></a>
<a class="sourceLine" id="cb1-23" title="23">  <span class="kw">&lt;/channel&gt;</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="kw">&lt;/rss&gt;</span></a></code></pre></div>
<p>There is an XML header followed by the <em>rss</em> tag an optional <em>channel</em> tag and then the <em>item</em> tags. The <em>item</em> tags are what we are most interested in as they have the RSS feed information you will want to look at. Typical entries are <em>title</em>, <em>link</em>, <em>description</em> and <em>pubDate</em>. There may be other tags as well but these four are the most used.</p>
<p>The methods of <strong>RssFeed</strong> are:</p>
<ul>
<li>public function __construct($data, $isfile=true, $savedata=false)</li>
<li>public function getDb()</li>
<li>public function getItem($inx)</li>
<li>public function getRawData()</li>
</ul>
<p>The 'constructor' takes up to three arguments. $data is a string, either a filename or raw data. $isfile is true if the string in $data is a filename and false if it is raw data (defaults to true). $savedata is true if you want to save the raw XML and false if you don't (defaults to false).</p>
<p>The 'getDb' method takes not arguments, it returns the array of the <em>item</em> tags and their children. You can look at this array with <code>var_dump($returned)</code> to find the elements you want to look at.</p>
<p>The 'getItem' methode take one integer argument, the <em>item</em> index. It returns a sub-array of the elements under the <em>item</em> tab.</p>
<p>The 'getRawData' method returns the raw XML.</p>
<h2 id="example-code">Example Code</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">&lt;?php</span></a>
<a class="sourceLine" id="cb2-2" title="2">requier_once<span class="ot">(</span><span class="kw">$PATH_TO_VENDOR</span> . <span class="st">&quot;/vendor/autoload.php&quot;</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">use</span> bartonlp\RssFeed<span class="ot">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">$rss</span> = <span class="kw">new</span> RssFeed<span class="ot">(</span><span class="st">&quot;docs/testrss.xml&quot;</span><span class="ot">,</span> <span class="kw">true</span><span class="ot">,</span> <span class="kw">true</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">$raw</span> = <span class="kw">$rss</span>-&gt;getRawData<span class="ot">();</span></a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">// This is the raw XML from the site.</span></a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="kw">echo</span> <span class="st">&quot;&lt;pre&gt;Raw:</span><span class="kw">\n$raw</span><span class="st">&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-10" title="10"></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">// This is the item array. Array element &#39;0&#39; is the first &lt;item&gt; etc.</span></a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="kw">$db</span> = <span class="kw">$rss</span>-&gt;getDb<span class="ot">();</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="kw">echo</span> <span class="st">&quot;DB:</span><span class="kw">\n</span><span class="st">&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="fu">var_dump</span><span class="ot">(</span><span class="kw">$db</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb2-16" title="16"></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">// This gets the first &lt;item&gt; as an associative array.</span></a>
<a class="sourceLine" id="cb2-18" title="18"></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="kw">$item</span> = <span class="kw">$rss</span>-&gt;getItem<span class="ot">(</span><span class="dv">0</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="kw">echo</span> <span class="st">&quot;First Item:</span><span class="kw">\n</span><span class="st">&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="fu">var_dump</span><span class="ot">(</span><span class="kw">$item</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb2-22" title="22"></a>
<a class="sourceLine" id="cb2-23" title="23"><span class="co">// To display items just do $item[&#39;title&#39;] etc.</span></a>
<a class="sourceLine" id="cb2-24" title="24"></a>
<a class="sourceLine" id="cb2-25" title="25"><span class="kw">echo</span> <span class="kw">&lt;&lt;&lt;EOF</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="st">&lt;/pre&gt;</span></a>
<a class="sourceLine" id="cb2-27" title="27"><span class="st">&lt;p&gt;Item title: </span><span class="kw">{$item[&#39;title&#39;]}</span><span class="st">&lt;br&gt;</span></a>
<a class="sourceLine" id="cb2-28" title="28"><span class="st">Item description: </span><span class="kw">{$item[&#39;description&#39;]}</span><span class="st">&lt;/p&gt;</span></a>
<a class="sourceLine" id="cb2-29" title="29"></a>
<a class="sourceLine" id="cb2-30" title="30"><span class="st">// Now iterate over the items</span></a>
<a class="sourceLine" id="cb2-31" title="31"></a>
<a class="sourceLine" id="cb2-32" title="32"><span class="st">echo &quot;&lt;h1&gt;Example of Iterating Over Entire Array of Items&lt;/h1&gt;&quot;;</span></a>
<a class="sourceLine" id="cb2-33" title="33"><span class="st">foreach(</span><span class="kw">$rss</span><span class="st">-&gt;getDb() as </span><span class="kw">$val</span><span class="st">) {</span></a>
<a class="sourceLine" id="cb2-34" title="34"><span class="st">  foreach(</span><span class="kw">$val</span><span class="st"> as </span><span class="kw">$key</span><span class="st">=&gt;</span><span class="kw">$v</span><span class="st">) {</span></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="st">    echo &quot;</span><span class="kw">$key</span><span class="st">: </span><span class="kw">$v</span><span class="st">&lt;br&gt;&quot;;</span></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="st">  }</span></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="st">  echo &quot;&lt;hr&gt;&quot;;</span></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="st">}</span></a>
<a class="sourceLine" id="cb2-39" title="39"><span class="st">echo &quot;DONE&quot;;</span></a>
<a class="sourceLine" id="cb2-40" title="40"><span class="st">function escape(</span><span class="kw">$v</span><span class="st">) {</span></a>
<a class="sourceLine" id="cb2-41" title="41"><span class="st">  return preg_replace([&#39;~&lt;~&#39;, &#39;~&gt;~&#39;], [&#39;&amp;lt;&#39;, &#39;&amp;gt;&#39;], </span><span class="kw">$v</span><span class="st">);</span></a>
<a class="sourceLine" id="cb2-42" title="42"><span class="st">}</span></a></code></pre></div>
<p>If you run this you will see:</p>
<p><img src="https://bartonlp.github.io/rssfeed/image.png" alt="Image of screen" /></p>
<hr />
<h2 id="contact-me">Contact me</h2>
<p>Barton Phillips : <a href="mailto://bartonphillips@gmail.com">mailto://bartonphillips@gmail.com</a><br />
Copyright © 2022 Barton Phillips<br />
Project maintained by <a href="https://github.com/bartonlp">bartonlp</a></p>
</body>
</html>
