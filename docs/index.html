<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Barton Phillips: bartonphillips@gmail.com">
  <title>Index</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

pre.sourceCode {
  background-color: #EEF3E2;
  border-left: 10px solid gray;
  padding: 5px;
}
code {
  background-color: #EEF3E2;
}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="rssfeed-class">RssFeed Class</h1>
<p><a href="https://github.com/bartonlp/rssfeed">GitHub: https://github.com/bartonlp/rssfeed</a></p>
<p>This is a PHP class that can read RSS feeds. A RSS file has an XML format with <em>item</em> as the main element. The XML file looks something like this:</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; <span class="kw">?&gt;</span>
<span class="kw">&lt;rss</span><span class="ot"> version=</span><span class="st">&quot;2.0&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;channel&gt;</span>
    <span class="kw">&lt;title&gt;</span>Main Title<span class="kw">&lt;/title&gt;</span>
    <span class="kw">&lt;link&gt;</span>http://www.example.com<span class="kw">&lt;/link&gt;</span>
    <span class="kw">&lt;description&gt;</span>Example description for channel<span class="kw">&lt;/description&gt;</span>
    <span class="kw">&lt;lastBuildDate&gt;</span>Sat, 03 Dec 2016 19:31:18 +0000<span class="kw">&lt;/lastBuildDate&gt;</span>
    <span class="kw">&lt;generator&gt;</span>Program Name if any<span class="kw">&lt;/generator&gt;</span>
    <span class="kw">&lt;item&gt;</span>
      <span class="kw">&lt;title&gt;</span>Example of RSS Feed<span class="kw">&lt;/title&gt;</span>
      <span class="kw">&lt;link&gt;</span>http://www.example.com/link/<span class="kw">&lt;/link&gt;</span>
      <span class="kw">&lt;description&gt;</span>
        Description of this item. All entities should be escaped. Example <span class="dv">&amp;lt;</span>test<span class="dv">&amp;gt;</span> 
      <span class="kw">&lt;/description&gt;</span>
      <span class="kw">&lt;pubDate&gt;</span>Sat, 16 May 2009 17:12:15 +0000<span class="kw">&lt;/pubDate&gt;</span>
    <span class="kw">&lt;/item&gt;</span>
    <span class="kw">&lt;item&gt;</span>
      <span class="kw">&lt;title&gt;</span>Another Example<span class="kw">&lt;/title&gt;</span>
      <span class="kw">&lt;link&gt;</span>http://www.example.com/link2/&gt;
      <span class="kw">&lt;description&gt;</span>Some more stuff<span class="kw">&lt;/description&gt;</span>
      <span class="kw">&lt;pubDate&gt;</span>Sat, 16 May 2016 17:12:15 +0000<span class="kw">&lt;/pubDate&gt;</span>
    <span class="kw">&lt;/item&gt;</span>
  <span class="kw">&lt;/channel&gt;</span>
<span class="kw">&lt;/rss&gt;</span></code></pre></div>
<p>There is an XML header followed by the <em>rss</em> tag an optional <em>channel</em> tag and then the <em>item</em> tags. The <em>item</em> tags are what we are most interested in as they have the RSS feed information you will want to look at. Typical entries are <em>title</em>, <em>link</em>, <em>description</em> and <em>pubDate</em>. There may be other tags as well but these four are the most used.</p>
<p>The methods of <strong>RssFeed</strong> are:</p>
<ul>
<li>public function __construct($data, $isfile=true, $savedata=false)</li>
<li>public function getDb()</li>
<li>public function getItem($inx)</li>
<li>public function getRawData()</li>
</ul>
<p>The 'constructor' takes up to three arguments. $data is a string, either a filename or raw data. $isfile is true if the string in $data is a filename and false if it is raw date (defaults to true). $savedate is true if you want to save the raw XML and false if you don't (defaults to false).</p>
<p>The 'getDb' method takes not arguments, it returns the array of the <em>item</em> tags and their children. You can look at this array with <code>var_dump($returned)</code> to find the elements you want to look at.</p>
<p>The 'getItem' methode take one integer argument, the <em>item</em> index. It returns a sub-array of the elements under the <em>item</em> tab.</p>
<p>The 'getRawData' method returns the raw XML.</p>
<h2 id="example-code">Example Code</h2>
<div class="sourceCode"><pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>
requier_once<span class="ot">(</span><span class="kw">$PATH_TO_VENDOR</span> . <span class="st">&quot;/vendor/autoload.php&quot;</span><span class="ot">);</span>
<span class="kw">use</span> bartonlp\RssFeed<span class="ot">;</span>
<span class="kw">$rss</span> = <span class="kw">new</span> RssFeed<span class="ot">(</span><span class="st">&quot;docs/testrss.xml&quot;</span><span class="ot">,</span> <span class="kw">true</span><span class="ot">,</span> <span class="kw">true</span><span class="ot">);</span>
<span class="kw">$raw</span> = <span class="kw">$rss</span>-&gt;getRawData<span class="ot">();</span>

<span class="co">// This is the raw XML from the site.</span>

<span class="fu">echo</span> <span class="st">&quot;&lt;pre&gt;Raw:</span><span class="kw">\n$raw</span><span class="st">&quot;</span><span class="ot">;</span>

<span class="co">// This is the item array. Array element &#39;0&#39; is the first &lt;item&gt; etc.</span>

<span class="kw">$db</span> = <span class="kw">$rss</span>-&gt;getDb<span class="ot">();</span>
<span class="fu">echo</span> <span class="st">&quot;DB:</span><span class="kw">\n</span><span class="st">&quot;</span><span class="ot">;</span>
<span class="fu">var_dump</span><span class="ot">(</span><span class="kw">$db</span><span class="ot">);</span>

<span class="co">// This gets the first &lt;item&gt; as an associative array.</span>

<span class="kw">$item</span> = <span class="kw">$rss</span>-&gt;getItem<span class="ot">(</span><span class="dv">0</span><span class="ot">);</span>
<span class="fu">echo</span> <span class="st">&quot;First Item:</span><span class="kw">\n</span><span class="st">&quot;</span><span class="ot">;</span>
<span class="fu">var_dump</span><span class="ot">(</span><span class="kw">$item</span><span class="ot">);</span>

<span class="co">// To display items just do $item[&#39;title&#39;] etc.</span>

<span class="fu">echo</span> <span class="kw">&lt;&lt;&lt;EOF</span>
<span class="st">&lt;/pre&gt;</span>
<span class="st">&lt;p&gt;Item title: </span><span class="kw">{$item[&#39;title&#39;]}</span><span class="st">&lt;br&gt;</span>
<span class="st">Item description: </span><span class="kw">{$item[&#39;description&#39;]}</span><span class="st">&lt;/p&gt;</span>

<span class="st">// Now iterate over the items</span>

<span class="st">echo &quot;&lt;h1&gt;Example of Iterating Over Entire Array of Items&lt;/h1&gt;&quot;;</span>
<span class="st">foreach(</span><span class="kw">$rss</span><span class="st">-&gt;getDb() as </span><span class="kw">$val</span><span class="st">) {</span>
<span class="st">  foreach(</span><span class="kw">$val</span><span class="st"> as </span><span class="kw">$key</span><span class="st">=&gt;</span><span class="kw">$v</span><span class="st">) {</span>
<span class="st">    echo &quot;</span><span class="kw">$key</span><span class="st">: </span><span class="kw">$v</span><span class="st">&lt;br&gt;&quot;;</span>
<span class="st">  }</span>
<span class="st">  echo &quot;&lt;hr&gt;&quot;;</span>
<span class="st">}</span>
<span class="st">echo &quot;DONE&quot;;</span>
<span class="st">function escape(</span><span class="kw">$v</span><span class="st">) {</span>
<span class="st">  return preg_replace([&#39;~&lt;~&#39;, &#39;~&gt;~&#39;], [&#39;&amp;lt;&#39;, &#39;&amp;gt;&#39;], </span><span class="kw">$v</span><span class="st">);</span>
<span class="st">}</span></code></pre></div>
<p>If you run this you will see:</p>
<p><img src="https://bartonlp.github.io/rssfeed/image.png" alt="Image of screen" /></p>
<hr />
<h2 id="contact-me-bartonphillipsgmail.com">Contact me: <script type="text/javascript">
<!--
h='&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;';a='&#64;';n='&#x2f;&#x2f;&#98;&#x61;&#114;&#116;&#x6f;&#110;&#112;&#104;&#x69;&#108;&#108;&#x69;&#112;&#x73;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'" clas'+'s="em' + 'ail">'+'&#98;&#x61;&#114;&#116;&#x6f;&#110;&#112;&#104;&#x69;&#108;&#108;&#x69;&#112;&#x73;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;'+'<\/'+'a'+'>');
// -->
</script><noscript>&#98;&#x61;&#114;&#116;&#x6f;&#110;&#112;&#104;&#x69;&#108;&#108;&#x69;&#112;&#x73;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;&#32;&#40;&#x2f;&#x2f;&#98;&#x61;&#114;&#116;&#x6f;&#110;&#112;&#104;&#x69;&#108;&#108;&#x69;&#112;&#x73;&#32;&#x61;&#116;&#32;&#x67;&#x6d;&#x61;&#x69;&#108;&#32;&#100;&#x6f;&#116;&#32;&#x63;&#x6f;&#x6d;&#x29;</noscript></h2>
</body>
</html>
